!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";function r(t,e,n,o){this.message=t,this.expected=e,this.found=n,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}!function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}(r,Error),r.buildMessage=function(t,e){var n={literal:function(t){return'"'+o(t.text)+'"'},class:function(t){var e,n="";for(e=0;e<t.parts.length;e++)n+=t.parts[e]instanceof Array?c(t.parts[e][0])+"-"+c(t.parts[e][1]):c(t.parts[e]);return"["+(t.inverted?"^":"")+n+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function o(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}function c(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}return"Expected "+function(t){var e,r,o,c=new Array(t.length);for(e=0;e<t.length;e++)c[e]=(o=t[e],n[o.type](o));if(c.sort(),c.length>0){for(e=1,r=1;e<c.length;e++)c[e-1]!==c[e]&&(c[r]=c[e],r++);c.length=r}switch(c.length){case 1:return c[0];case 2:return c[0]+" or "+c[1];default:return c.slice(0,-1).join(", ")+", or "+c[c.length-1]}}(t)+" but "+function(t){return t?'"'+o(t)+'"':"end of input"}(e)+" found."},t.exports={SyntaxError:r,parse:function(t,e){e=void 0!==e?e:{};var n,o={},c={start:ut},u=ut,a=Q("-",!1),i=/^[0-9]/,s=tt([["0","9"]],!1,!1),l=Q("(",!1),f=Q(")",!1),h=Q("<",!1),p=Q(">",!1),d=Q("[",!1),g=Q("]",!1),v=Q("+",!1),m=Q("*",!1),A=Q("/",!1),b=Q("%",!1),x=/^[ \t\n]/,y=tt([" ","\t","\n"],!1,!1),C=Q("//",!1),w=/^[^\n]/,M=tt(["\n"],!0,!1),S=Q("paper",!1),E=Q("pen",!1),k=Q("line",!1),_=Q("set",!1),T=Q("repeat",!1),j=Q("{",!1),O=Q("}",!1),F=Q("command",!1),I=Q("number",!1),P=Q("\n",!1),R=Q("log",!1),L=Q("forever",!1),$=Q("stop",!1),H=Q("value",!1),z=Q("smaller?",!1),B=Q("notsmaller?",!1),Z=Q("same?",!1),D=Q("notsame?",!1),U=/^[_a-zA-Z]/,V=tt(["_",["a","z"],["A","Z"]],!1,!1),W=/^[_a-zA-Z0-9]/,N=tt(["_",["a","z"],["A","Z"],["0","9"]],!1,!1),X=0,Y=0,q=[{line:1,column:1}],G=0,J=[];if("startRule"in e){if(!(e.startRule in c))throw new Error("Can't start parsing from rule \""+e.startRule+'".');u=c[e.startRule]}function K(e,n){throw n=void 0!==n?n:rt(Y,X),ct([et(e)],t.substring(Y,X),n)}function Q(t,e){return{type:"literal",text:t,ignoreCase:e}}function tt(t,e,n){return{type:"class",parts:t,inverted:e,ignoreCase:n}}function et(t){return{type:"other",description:t}}function nt(e){var n,r=q[e];if(r)return r;for(n=e-1;!q[n];)n--;for(r={line:(r=q[n]).line,column:r.column};n<e;)10===t.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return q[e]=r,r}function rt(t,e){var n=nt(t),r=nt(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:r.line,column:r.column}}}function ot(t){X<G||(X>G&&(G=X,J=[]),J.push(t))}function ct(t,e,n){return new r(r.buildMessage(t,e),t,e,n)}function ut(){var t,e,n;return t=X,(e=at())!==o&&ft()!==o?(Y=t,n=e,t=e=function(t){xt=t;const e={mouse:function(t,e){1!=e.length&&K("Mouse needs 1, 2 or 3");const n=e[0](t);switch(n){case 1:return xt.mousex;case 2:return xt.mousey;default:K("Mouse needs 1, 2 or 3, got "+n)}},time:function(t,e){1!=e.length&&K("Time needs 1, 2, 3 or 4");const n=e[0](t),r=new Date;switch(n){case 1:return r.getHours();case 2:return r.getMinutes();case 3:return r.getSeconds();case 4:return r.getMilliseconds();default:K("Time needs 1, 2, 3 or 4, got "+n)}}};n(e)}):(X=t,t=o),t}function at(){var t,e,n,r;for(t=X,e=[],n=it();n!==o;)e.push(n),n=it();return e!==o&&(Y=t,r=e,e=function(t){let e=null;for(let n of r)e=n(t);return e}),t=e}function it(){var e,n;return e=X,ft()!==o&&(n=function(){var e;(e=function(){var e,n,r;e=X,"paper"===t.substr(X,5)?(n="paper",X+=5):(n=o,ot(S));n!==o&&ht()!==o&&(r=mt())!==o?(Y=e,c=r,e=n=function(t){const e=c(t);xt.paper(e)}):(X=e,e=o);var c;return e}())===o&&(e=function(){var e,n,r;e=X,"pen"===t.substr(X,3)?(n="pen",X+=3):(n=o,ot(E));n!==o&&ht()!==o&&(r=mt())!==o?(Y=e,c=r,e=n=function(t){const e=c(t);xt.pen(e)}):(X=e,e=o);var c;return e}())===o&&(e=function(){var e,n,r,c,u,a;e=X,"line"===t.substr(X,4)?(n="line",X+=4):(n=o,ot(k));n!==o&&ht()!==o&&(r=At())!==o&&ft()!==o&&(c=At())!==o&&ft()!==o&&(u=At())!==o&&ft()!==o&&(a=At())!==o?(Y=e,i=r,s=c,l=u,f=a,e=n=function(t){const e=i(t),n=s(t),r=l(t),o=f(t);xt.line(e,n,r,o)}):(X=e,e=o);var i,s,l,f;return e}())===o&&(e=function(){var e,n,r,c,u,a,i;e=X,"set"===t.substr(X,3)?(n="set",X+=3):(n=o,ot(_));n!==o&&ht()!==o&&(r=bt())!==o&&ft()!==o&&(c=st())!==o?(Y=e,s=r,l=c,e=n=function(t){t[s]=l(t)}):(X=e,e=o);var s,l;e===o&&(e=X,"set"===t.substr(X,3)?(n="set",X+=3):(n=o,ot(_)),n!==o&&ht()!==o?(91===t.charCodeAt(X)?(r="[",X++):(r=o,ot(d)),r!==o&&ft()!==o&&(c=At())!==o&&ft()!==o&&(u=At())!==o&&ft()!==o?(93===t.charCodeAt(X)?(a="]",X++):(a=o,ot(g)),a!==o&&ft()!==o&&(i=mt())!==o?(Y=e,f=c,h=u,p=i,e=n=function(t){const e=f(t),n=h(t),r=p(t);xt.dot(e,n,r)}):(X=e,e=o)):(X=e,e=o)):(X=e,e=o));var f,h,p;return e}())===o&&(e=function(){var e,n,r,c,u,a,i,s;e=X,"repeat"===t.substr(X,6)?(n="repeat",X+=6):(n=o,ot(T));n!==o&&ht()!==o&&(r=bt())!==o&&ft()!==o&&(c=st())!==o&&ft()!==o&&(u=st())!==o&&ft()!==o?(123===t.charCodeAt(X)?(a="{",X++):(a=o,ot(j)),a!==o&&(i=at())!==o&&ft()!==o?(125===t.charCodeAt(X)?(s="}",X++):(s=o,ot(O)),s!==o?(Y=e,l=r,f=c,h=u,p=i,e=n=function(t){for(t[l]=f(t);t[l]<h(t);t[l]++)p(t)}):(X=e,e=o)):(X=e,e=o)):(X=e,e=o);var l,f,h,p;return e}())===o&&(e=function(){var e,n,r,c,u,a,i;e=X,"command"===t.substr(X,7)?(n="command",X+=7):(n=o,ot(F));n===o&&("number"===t.substr(X,6)?(n="number",X+=6):(n=o,ot(I)));n!==o&&ht()!==o&&(r=bt())!==o&&(c=function(){var t,e,n;t=X,e=[],n=dt();for(;n!==o;)e.push(n),n=dt();e!==o&&(Y=t,e=e);return t=e}())!==o&&ft()!==o?(123===t.charCodeAt(X)?(u="{",X++):(u=o,ot(j)),u!==o&&(a=at())!==o&&ft()!==o?(125===t.charCodeAt(X)?(i="}",X++):(i=o,ot(O)),i!==o?(Y=e,s=r,l=c,f=a,e=n=function(t){t[s]=function(e,n){const r={...t,...e};return l.forEach((function(t,e){r[t]=n[e](r)})),console.log("Invoke",r,f),f(r)}}):(X=e,e=o)):(X=e,e=o)):(X=e,e=o);var s,l,f;return e}())===o&&(e=function(){var e,n,r;e=X,"log"===t.substr(X,3)?(n="log",X+=3):(n=o,ot(R));n!==o&&ht()!==o&&(r=st())!==o?(Y=e,c=r,e=n=function(t){console.log("Log",c(t))}):(X=e,e=o);var c;return e}())===o&&(e=function(){var e,n,r,c,u,a,i;e=X,"smaller?"===t.substr(X,8)?(n="smaller?",X+=8):(n=o,ot(z));n===o&&("notsmaller?"===t.substr(X,11)?(n="notsmaller?",X+=11):(n=o,ot(B)),n===o&&("same?"===t.substr(X,5)?(n="same?",X+=5):(n=o,ot(Z)),n===o&&("notsame?"===t.substr(X,8)?(n="notsame?",X+=8):(n=o,ot(D)))));n!==o&&ft()!==o&&(r=st())!==o&&ft()!==o&&(c=st())!==o&&ft()!==o?(123===t.charCodeAt(X)?(u="{",X++):(u=o,ot(j)),u!==o&&(a=at())!==o&&ft()!==o?(125===t.charCodeAt(X)?(i="}",X++):(i=o,ot(O)),i!==o?(Y=e,s=n,l=r,f=c,h=a,e=n=function(t){let e,n=l(t),r=f(t);switch(s){case"smaller?":e=n<r;break;case"notsmaller?":e=n>=r;break;case"same?":e=n==r;break;case"notsame?":e=n!=r}e&&h(t)}):(X=e,e=o)):(X=e,e=o)):(X=e,e=o);var s,l,f,h;return e}())===o&&(e=function(){var e,n,r,c,u;e=X,"forever"===t.substr(X,7)?(n="forever",X+=7):(n=o,ot(L));n!==o&&ft()!==o?(123===t.charCodeAt(X)?(r="{",X++):(r=o,ot(j)),r!==o&&(c=at())!==o&&ft()!==o?(125===t.charCodeAt(X)?(u="}",X++):(u=o,ot(O)),u!==o?(Y=e,a=c,e=n=function(t){console.log("Forever"),xt.timer=setInterval((function(){a(t)}),100)}):(X=e,e=o)):(X=e,e=o)):(X=e,e=o);var a;return e}())===o&&(e=function(){var e,n;e=X,"stop"===t.substr(X,4)?(n="stop",X+=4):(n=o,ot($));n!==o&&(Y=e,n=function(t){console.log("Stop"),xt.timer?(clearInterval(xt.timer),xt.timer=null):K("Not in a forever loop")});return e=n}())===o&&(e=function(){var e,n,r;e=X,"value"===t.substr(X,5)?(n="value",X+=5):(n=o,ot(H));n!==o&&ht()!==o&&(r=st())!==o?(Y=e,c=r,e=n=function(t){return console.log("Value",c(t)),c(t)}):(X=e,e=o);var c;return e}())===o&&(e=function(){var e,n,r,c;e=X,(n=bt())!==o&&(r=gt())!==o?(10===t.charCodeAt(X)?(c="\n",X++):(c=o,ot(P)),c!==o?(Y=e,u=n,a=r,e=n=function(t){return t.hasOwnProperty(u)||K(`Command ${u} not defined`),console.log("Cmd",u),t[u](t,a)}):(X=e,e=o)):(X=e,e=o);var u,a;return e}());return e}())!==o?(Y=e,e=n):(X=e,e=o),e}function st(){var e,n,r,c,u,m,A,b,x,y,C,w;if(e=X,45===t.charCodeAt(X)?(n="-",X++):(n=o,ot(a)),n===o&&(n=null),n!==o){if(r=[],i.test(t.charAt(X))?(c=t.charAt(X),X++):(c=o,ot(s)),c!==o)for(;c!==o;)r.push(c),i.test(t.charAt(X))?(c=t.charAt(X),X++):(c=o,ot(s));else r=o;r!==o?(Y=e,b=n,x=r,e=n=function(){let t=parseInt(x.join(""),10);return"-"==b&&(t*=-1),t}):(X=e,e=o)}else X=e,e=o;return e===o&&(e=X,40===t.charCodeAt(X)?(n="(",X++):(n=o,ot(l)),n!==o&&(r=function e(){var n,r,c,u;n=X,(r=lt())!==o&&ft()!==o?(43===t.charCodeAt(X)?(c="+",X++):(c=o,ot(v)),c!==o&&ft()!==o&&(u=e())!==o?(Y=n,i=r,s=u,n=r=function(t){return i(t)+s(t)}):(X=n,n=o)):(X=n,n=o);var i,s;n===o&&(n=X,(r=lt())!==o&&ft()!==o?(45===t.charCodeAt(X)?(c="-",X++):(c=o,ot(a)),c!==o&&ft()!==o&&(u=e())!==o?(Y=n,l=r,f=u,n=r=function(t){return l(t)-f(t)}):(X=n,n=o)):(X=n,n=o),n===o&&(n=lt())===o&&(n=st()));var l,f;return n}())!==o?(41===t.charCodeAt(X)?(c=")",X++):(c=o,ot(f)),c!==o?(Y=e,e=n=r):(X=e,e=o)):(X=e,e=o),e===o&&(e=X,(n=bt())!==o&&(Y=e,w=n,n=function(t){return t.hasOwnProperty(w)||K(`Variable ${w} not defined`),t[w]}),(e=n)===o&&(e=X,60===t.charCodeAt(X)?(n="<",X++):(n=o,ot(h)),n!==o&&(r=ft())!==o&&(c=bt())!==o&&(u=gt())!==o?(62===t.charCodeAt(X)?(m=">",X++):(m=o,ot(p)),m!==o?(Y=e,e=n=function(t,e){return function(n){return n.hasOwnProperty(t)||K(`Command ${t} not defined`),console.log("Cmd as value",t),n[t](n,e)}}(c,u)):(X=e,e=o)):(X=e,e=o),e===o&&(e=X,91===t.charCodeAt(X)?(n="[",X++):(n=o,ot(d)),n!==o&&(r=ft())!==o&&(c=st())!==o&&(u=ht())!==o&&(m=st())!==o&&ft()!==o?(93===t.charCodeAt(X)?(A="]",X++):(A=o,ot(g)),A!==o?(Y=e,y=c,C=m,e=n=function(t){const e=y(t),n=C(t);return xt.getdot(e,n)}):(X=e,e=o)):(X=e,e=o))))),e}function lt(){var e,n,r,c,u,a,i,s;return e=X,(n=st())!==o&&ft()!==o?(42===t.charCodeAt(X)?(r="*",X++):(r=o,ot(m)),r!==o&&ft()!==o&&(c=lt())!==o?(Y=e,u=n,a=c,e=n=function(t){return u(t)*a(t)}):(X=e,e=o)):(X=e,e=o),e===o&&(e=X,(n=st())!==o&&ft()!==o?(47===t.charCodeAt(X)?(r="/",X++):(r=o,ot(A)),r!==o&&ft()!==o&&(c=lt())!==o?(Y=e,i=n,s=c,e=n=function(t){return i(t)/s(t)}):(X=e,e=o)):(X=e,e=o),e===o&&(e=X,(n=st())!==o&&ft()!==o?(37===t.charCodeAt(X)?(r="%",X++):(r=o,ot(b)),r!==o&&ft()!==o&&(c=lt())!==o?(Y=e,e=n=function(t,e){return function(n){return t(n)%e(n)}}(n,c)):(X=e,e=o)):(X=e,e=o),e===o&&(e=st()))),e}function ft(){var e,n,r,c;for(e=X,n=[],r=pt();r!==o;)n.push(r),r=pt();if(n!==o){for(r=[],x.test(t.charAt(X))?(c=t.charAt(X),X++):(c=o,ot(y));c!==o;)r.push(c),x.test(t.charAt(X))?(c=t.charAt(X),X++):(c=o,ot(y));r!==o?e=n=[n,r]:(X=e,e=o)}else X=e,e=o;return e}function ht(){var e,n,r,c;for(e=X,n=[],r=pt();r!==o;)n.push(r),r=pt();if(n!==o){if(r=[],x.test(t.charAt(X))?(c=t.charAt(X),X++):(c=o,ot(y)),c!==o)for(;c!==o;)r.push(c),x.test(t.charAt(X))?(c=t.charAt(X),X++):(c=o,ot(y));else r=o;r!==o?e=n=[n,r]:(X=e,e=o)}else X=e,e=o;return e}function pt(){var e,n,r,c,u;for(e=X,n=[],x.test(t.charAt(X))?(r=t.charAt(X),X++):(r=o,ot(y));r!==o;)n.push(r),x.test(t.charAt(X))?(r=t.charAt(X),X++):(r=o,ot(y));if(n!==o)if("//"===t.substr(X,2)?(r="//",X+=2):(r=o,ot(C)),r!==o){for(c=[],w.test(t.charAt(X))?(u=t.charAt(X),X++):(u=o,ot(M));u!==o;)c.push(u),w.test(t.charAt(X))?(u=t.charAt(X),X++):(u=o,ot(M));c!==o?e=n=[n,r,c]:(X=e,e=o)}else X=e,e=o;else X=e,e=o;return e}function dt(){var t,e;return t=X,ft()!==o&&(e=bt())!==o?(Y=t,t=e):(X=t,t=o),t}function gt(){var t,e;for(t=[],e=vt();e!==o;)t.push(e),e=vt();return t}function vt(){var t,e;return t=X,ht()!==o&&(e=st())!==o?(Y=t,t=e):(X=t,t=o),t}function mt(){var t,e,n;return t=X,(e=st())!==o&&(Y=t,n=e,e=function(t){let e=n(t);!("_nocheck"in t&&1==t._nocheck)&&(e<0||e>100)&&K("Color must be between 0 and 100, got ${color}"),e*=2.55;let r=Math.round(e).toString(16);return r.length<2&&(r="0"+r),"#"+r.repeat(3)}),t=e}function At(){var t,e,n;return t=X,(e=st())!==o&&(Y=t,n=e,e=function(t){let e=n(t);return!("_nocheck"in t&&1==t._nocheck)&&(e<0||e>100)&&K("Coordinate must be between 0 and 100, got "+e),e}),t=e}function bt(){var e,n,r,c;if(e=X,U.test(t.charAt(X))?(n=t.charAt(X),X++):(n=o,ot(V)),n!==o){for(r=[],W.test(t.charAt(X))?(c=t.charAt(X),X++):(c=o,ot(N));c!==o;)r.push(c),W.test(t.charAt(X))?(c=t.charAt(X),X++):(c=o,ot(N));r!==o?(Y=e,e=n=n+r.join("")):(X=e,e=o)}else X=e,e=o;return e}let xt;if((n=u())!==o&&X===t.length)return n;throw n!==o&&X<t.length&&ot({type:"end"}),ct(J,G<t.length?t.charAt(G):null,G<t.length?rt(G,G+1):rt(G,G))}}},function(t,e,n){"use strict";n.r(e);var r=n(0);const o=document.getElementById("code");o.innerHTML="paper 50";const c=document.getElementById("output"),u=document.getElementById("canvas");let a={ctx:u.getContext("2d"),timer:null,mousex:0,mousey:0,paper:function(t){console.log("Paper",t),a.ctx.fillStyle=t,a.ctx.fillRect(0,0,500,500)},pen:function(t){a.ctx.strokeStyle=t},line:function(t,e,n,r){a.ctx.lineWidth=5,a.ctx.moveTo(5*t,5*e),a.ctx.lineTo(5*n,5*r),a.ctx.stroke()},dot:function(t,e,n){a.ctx.fillStyle=n,a.ctx.fillRect(5*t,5*e,5,5)},getdot:function(t,e){const n=a.ctx.getImageData(t,e,1,1).data;return Math.round(n[0]/2.55)}};function i(){a.timer&&(console.log("Stopped"),clearInterval(a.timer),a.timer=null),a.ctx.clearRect(0,0,u.width,u.height)}function s(){try{c.innerHTML="";Object(r.parse)(o.value)(a)}catch(t){"SyntaxError"==t.name?c.innerHTML=`${t.location.end.line}:${t.location.end.column}: ${t.message}`:c.innerHTML=t}}o.addEventListener("keyup",(function(){i(),s()}),!1),window.addEventListener("hashchange",(function(){i();const t=location.hash.substr(1);0==t.length?(console.log("Clear"),o.value="",s()):t.startsWith("https:")?(console.log("Fetch:",t),fetch("https://cors-anywhere.herokuapp.com/"+t).then(t=>t.text()).then(t=>{console.log("Code:",t),o.value=t,s()})):(console.log("Code:",t),o.value=decodeURI(t),s())}),!1),u.addEventListener("mousemove",(function(t){const e=u.getBoundingClientRect(),n=100/(e.right-e.left),r=100/(e.bottom-e.top);a.mousex=Math.round((t.clientX-e.left)*n),a.mousey=Math.round((t.clientY-e.top)*r)}),!1),i(),s()}]);