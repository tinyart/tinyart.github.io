!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e,r){"use strict";function n(t,e,r,o){this.message=t,this.expected=e,this.found=r,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,n)}!function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(n,Error),n.buildMessage=function(t,e){var r={literal:function(t){return'"'+o(t.text)+'"'},class:function(t){var e,r="";for(e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?u(t.parts[e][0])+"-"+u(t.parts[e][1]):u(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function o(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function u(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}return"Expected "+function(t){var e,n,o,u=new Array(t.length);for(e=0;e<t.length;e++)u[e]=(o=t[e],r[o.type](o));if(u.sort(),u.length>0){for(e=1,n=1;e<u.length;e++)u[e-1]!==u[e]&&(u[n]=u[e],n++);u.length=n}switch(u.length){case 1:return u[0];case 2:return u[0]+" or "+u[1];default:return u.slice(0,-1).join(", ")+", or "+u[u.length-1]}}(t)+" but "+function(t){return t?'"'+o(t)+'"':"end of input"}(e)+" found."},t.exports={SyntaxError:n,parse:function(t,e){e=void 0!==e?e:{};var r,o={},u={start:at},c=at,a=/^[0-9]/,i=et([["0","9"]],!1,!1),s=tt("(",!1),l=tt(")",!1),f=tt("<",!1),h=tt(">",!1),p=tt("+",!1),d=tt("-",!1),v=tt("*",!1),m=tt("/",!1),g=tt("%",!1),A=/^[ \t\n]/,b=et([" ","\t","\n"],!1,!1),x=tt("//",!1),y=/^[^\n]/,C=et(["\n"],!0,!1),w=tt("paper",!1),S=tt("pen",!1),E=tt("line",!1),M=tt("set",!1),_=tt("[",!1),k=tt("]",!1),j=tt("repeat",!1),O=tt("{",!1),F=tt("}",!1),T=tt("command",!1),R=tt("number",!1),I=tt("\n",!1),L=tt("log",!1),P=tt("forever",!1),$=tt("stop",!1),z=tt("value",!1),B=tt("smaller",!1),H=tt("notsmaller",!1),Z=tt("same",!1),U=tt("notsame",!1),N=tt("?",!1),V=/^[_a-zA-Z]/,W=et(["_",["a","z"],["A","Z"]],!1,!1),X=/^[_a-zA-Z0-9]/,Y=et(["_",["a","z"],["A","Z"],["0","9"]],!1,!1),q=0,D=0,G=[{line:1,column:1}],J=0,K=[];if("startRule"in e){if(!(e.startRule in u))throw new Error("Can't start parsing from rule \""+e.startRule+'".');c=u[e.startRule]}function Q(e,r){throw r=void 0!==r?r:ot(D,q),ct([rt(e)],t.substring(D,q),r)}function tt(t,e){return{type:"literal",text:t,ignoreCase:e}}function et(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function rt(t){return{type:"other",description:t}}function nt(e){var r,n=G[e];if(n)return n;for(r=e-1;!G[r];)r--;for(n={line:(n=G[r]).line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return G[e]=n,n}function ot(t,e){var r=nt(t),n=nt(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function ut(t){q<J||(q>J&&(J=q,K=[]),K.push(t))}function ct(t,e,r){return new n(n.buildMessage(t,e),t,e,r)}function at(){var t,e,r;return t=q,(e=it())!==o&&ht()!==o?(D=t,r=e,t=e=function(t){xt=t;const e={mouse:function(t,e){1!=e.length&&Q("Mouse needs 1, 2 or 3");const r=e[0](t);switch(r){case 1:return xt.mousex;case 2:return xt.mousey;default:Q("Mouse needs 1, 2 or 3, got "+r)}}};r(e)}):(q=t,t=o),t}function it(){var t,e,r,n,u,c;for(t=q,e=[],r=q,(n=ht())!==o&&(u=st())!==o?r=n=[n,u]:(q=r,r=o);r!==o;)e.push(r),r=q,(n=ht())!==o&&(u=st())!==o?r=n=[n,u]:(q=r,r=o);return e!==o&&(D=t,c=e,e=function(t){for(let e of c)e[1](t)}),t=e}function st(){var e;return(e=function(){var e,r,n;e=q,"paper"===t.substr(q,5)?(r="paper",q+=5):(r=o,ut(w));r!==o&&ht()!==o&&(n=gt())!==o?(D=e,u=n,e=r=function(t){xt.ctx.fillStyle=u(t),xt.ctx.fillRect(0,0,100,100)}):(q=e,e=o);var u;return e}())===o&&(e=function(){var e,r,n;e=q,"pen"===t.substr(q,3)?(r="pen",q+=3):(r=o,ut(S));r!==o&&ht()!==o&&(n=gt())!==o?(D=e,u=n,e=r=function(t){xt.ctx.strokeStyle=u(t)}):(q=e,e=o);var u;return e}())===o&&(e=function(){var e,r,n,u,c,a;e=q,"line"===t.substr(q,4)?(r="line",q+=4):(r=o,ut(E));r!==o&&ht()!==o&&(n=At())!==o&&ht()!==o&&(u=At())!==o&&ht()!==o&&(c=At())!==o&&ht()!==o&&(a=At())!==o?(D=e,i=n,s=u,l=c,f=a,e=r=function(t){xt.ctx.moveTo(i(t),s(t)),xt.ctx.lineTo(l(t),f(t)),xt.ctx.stroke()}):(q=e,e=o);var i,s,l,f;return e}())===o&&(e=function(){var e,r,n,u,c,a,i;e=q,"set"===t.substr(q,3)?(r="set",q+=3):(r=o,ut(M));r!==o&&ht()!==o&&(n=bt())!==o&&ht()!==o&&(u=lt())!==o?(D=e,s=n,l=u,e=r=function(t){t[s]=l(t)}):(q=e,e=o);var s,l;e===o&&(e=q,"set"===t.substr(q,3)?(r="set",q+=3):(r=o,ut(M)),r!==o&&ht()!==o?(91===t.charCodeAt(q)?(n="[",q++):(n=o,ut(_)),n!==o&&ht()!==o&&(u=At())!==o&&ht()!==o&&(c=At())!==o&&ht()!==o?(93===t.charCodeAt(q)?(a="]",q++):(a=o,ut(k)),a!==o&&ht()!==o&&(i=gt())!==o?(D=e,f=u,h=c,p=i,e=r=function(t){xt.ctx.fillStyle=p(t),xt.ctx.fillRect(f(t),h(t),1,1)}):(q=e,e=o)):(q=e,e=o)):(q=e,e=o));var f,h,p;return e}())===o&&(e=function(){var e,r,n,u,c,a,i,s;e=q,"repeat"===t.substr(q,6)?(r="repeat",q+=6):(r=o,ut(j));r!==o&&ht()!==o&&(n=bt())!==o&&ht()!==o&&(u=lt())!==o&&ht()!==o&&(c=lt())!==o&&ht()!==o?(123===t.charCodeAt(q)?(a="{",q++):(a=o,ut(O)),a!==o&&(i=it())!==o&&ht()!==o?(125===t.charCodeAt(q)?(s="}",q++):(s=o,ut(F)),s!==o?(D=e,l=n,f=u,h=c,p=i,e=r=function(t){for(t[l]=f(t);t[l]<h(t);t[l]++)p(t)}):(q=e,e=o)):(q=e,e=o)):(q=e,e=o);var l,f,h,p;return e}())===o&&(e=function(){var e,r,n,u,c,a,i;e=q,"command"===t.substr(q,7)?(r="command",q+=7):(r=o,ut(T));r===o&&("number"===t.substr(q,6)?(r="number",q+=6):(r=o,ut(R)));r!==o&&ht()!==o&&(n=bt())!==o&&(u=function(){var t,e,r;t=q,e=[],r=dt();for(;r!==o;)e.push(r),r=dt();e!==o&&(D=t,e=e);return t=e}())!==o&&ht()!==o?(123===t.charCodeAt(q)?(c="{",q++):(c=o,ut(O)),c!==o&&(a=it())!==o&&ht()!==o?(125===t.charCodeAt(q)?(i="}",q++):(i=o,ut(F)),i!==o?(D=e,s=n,l=u,f=a,e=r=function(t){t[s]=function(e,r){const n={...t,...e};return l.forEach((function(t,e){n[t]=r[e](n)})),console.log(n),f(n)}}):(q=e,e=o)):(q=e,e=o)):(q=e,e=o);var s,l,f;return e}())===o&&(e=function(){var e,r,n;e=q,"log"===t.substr(q,3)?(r="log",q+=3):(r=o,ut(L));r!==o&&ht()!==o&&(n=lt())!==o?(D=e,u=n,e=r=function(t){console.log("Log",u(t))}):(q=e,e=o);var u;return e}())===o&&(e=function(){var e,r,n,u;e=q,(r=bt())!==o&&(n=vt())!==o?(10===t.charCodeAt(q)?(u="\n",q++):(u=o,ut(I)),u!==o?(D=e,c=r,a=n,e=r=function(t){return t.hasOwnProperty(c)||Q(`Command ${c} not defined`),console.log("Cmd",c),t[c](t,a)}):(q=e,e=o)):(q=e,e=o);var c,a;return e}())===o&&(e=function(){var e,r,n,u,c;e=q,"forever"===t.substr(q,7)?(r="forever",q+=7):(r=o,ut(P));r!==o&&ht()!==o?(123===t.charCodeAt(q)?(n="{",q++):(n=o,ut(O)),n!==o&&(u=it())!==o&&ht()!==o?(125===t.charCodeAt(q)?(c="}",q++):(c=o,ut(F)),c!==o?(D=e,a=u,e=r=function(t){console.log("Forever"),xt.timer=setInterval((function(){a(t)}),100)}):(q=e,e=o)):(q=e,e=o)):(q=e,e=o);var a;return e}())===o&&(e=function(){var e,r;e=q,"stop"===t.substr(q,4)?(r="stop",q+=4):(r=o,ut($));r!==o&&(D=e,r=function(t){console.log("Stop"),xt.timer?(clearInterval(xt.timer),xt.timer=null):Q("Not in a forever loop")});return e=r}())===o&&(e=function(){var e,r,n;e=q,"value"===t.substr(q,5)?(r="value",q+=5):(r=o,ut(z));r!==o&&(n=lt())!==o?(D=e,e=r=n):(q=e,e=o);return e}())===o&&(e=function(){var e,r,n,u,c,a,i,s;e=q,"smaller"===t.substr(q,7)?(r="smaller",q+=7):(r=o,ut(B));r===o&&("notsmaller"===t.substr(q,10)?(r="notsmaller",q+=10):(r=o,ut(H)),r===o&&("same"===t.substr(q,4)?(r="same",q+=4):(r=o,ut(Z)),r===o&&("notsame"===t.substr(q,7)?(r="notsame",q+=7):(r=o,ut(U)))));r!==o?(63===t.charCodeAt(q)?(n="?",q++):(n=o,ut(N)),n!==o&&ht()!==o&&(u=lt())!==o&&ht()!==o&&(c=lt())!==o&&ht()!==o?(123===t.charCodeAt(q)?(a="{",q++):(a=o,ut(O)),a!==o&&(i=it())!==o&&ht()!==o?(125===t.charCodeAt(q)?(s="}",q++):(s=o,ut(F)),s!==o?(D=e,l=r,f=u,h=c,p=i,e=r=function(t){let e,r=f(t),n=h(t);switch(l){case"smaller":e=r<n;break;case"notsmaller":e=r>=n;break;case"same":e=r==n;break;case"notsame":e=r!=n}e&&p(t)}):(q=e,e=o)):(q=e,e=o)):(q=e,e=o)):(q=e,e=o);var l,f,h,p;return e}()),e}function lt(){var e,r,n,u,c,v,m,g;if(e=q,r=[],a.test(t.charAt(q))?(n=t.charAt(q),q++):(n=o,ut(i)),n!==o)for(;n!==o;)r.push(n),a.test(t.charAt(q))?(n=t.charAt(q),q++):(n=o,ut(i));else r=o;return r!==o&&(D=e,m=r,r=function(){return parseInt(m.join(""),10)}),(e=r)===o&&(e=q,40===t.charCodeAt(q)?(r="(",q++):(r=o,ut(s)),r!==o&&(n=function e(){var r,n,u,c;r=q,(n=ft())!==o&&ht()!==o?(43===t.charCodeAt(q)?(u="+",q++):(u=o,ut(p)),u!==o&&ht()!==o&&(c=e())!==o?(D=r,a=n,i=c,r=n=function(t){return a(t)+i(t)}):(q=r,r=o)):(q=r,r=o);var a,i;r===o&&(r=q,(n=ft())!==o&&ht()!==o?(45===t.charCodeAt(q)?(u="-",q++):(u=o,ut(d)),u!==o&&ht()!==o&&(c=e())!==o?(D=r,s=n,l=c,r=n=function(t){return s(t)-l(t)}):(q=r,r=o)):(q=r,r=o),r===o&&(r=ft())===o&&(r=lt()));var s,l;return r}())!==o?(41===t.charCodeAt(q)?(u=")",q++):(u=o,ut(l)),u!==o?(D=e,e=r=n):(q=e,e=o)):(q=e,e=o),e===o&&(e=q,(r=bt())!==o&&(D=e,g=r,r=function(t){return t.hasOwnProperty(g)||Q(`Variable ${g} not defined`),t[g]}),(e=r)===o&&(e=q,60===t.charCodeAt(q)?(r="<",q++):(r=o,ut(f)),r!==o&&(n=ht())!==o&&(u=bt())!==o&&(c=vt())!==o?(62===t.charCodeAt(q)?(v=">",q++):(v=o,ut(h)),v!==o?(D=e,e=r=function(t,e){return function(r){return r.hasOwnProperty(t)||Q(`Command ${t} not defined`),console.log("Cmd as value",t),r[t](r,e)}}(u,c)):(q=e,e=o)):(q=e,e=o)))),e}function ft(){var e,r,n,u,c,a,i,s;return e=q,(r=lt())!==o&&ht()!==o?(42===t.charCodeAt(q)?(n="*",q++):(n=o,ut(v)),n!==o&&ht()!==o&&(u=ft())!==o?(D=e,c=r,a=u,e=r=function(t){return c(t)*a(t)}):(q=e,e=o)):(q=e,e=o),e===o&&(e=q,(r=lt())!==o&&ht()!==o?(47===t.charCodeAt(q)?(n="/",q++):(n=o,ut(m)),n!==o&&ht()!==o&&(u=ft())!==o?(D=e,i=r,s=u,e=r=function(t){return i(t)/s(t)}):(q=e,e=o)):(q=e,e=o),e===o&&(e=q,(r=lt())!==o&&ht()!==o?(37===t.charCodeAt(q)?(n="%",q++):(n=o,ut(g)),n!==o&&ht()!==o&&(u=ft())!==o?(D=e,e=r=function(t,e){return function(r){return t(r)%e(r)}}(r,u)):(q=e,e=o)):(q=e,e=o),e===o&&(e=lt()))),e}function ht(){var e,r,n,u;for(e=q,r=[],n=pt();n!==o;)r.push(n),n=pt();if(r!==o){for(n=[],A.test(t.charAt(q))?(u=t.charAt(q),q++):(u=o,ut(b));u!==o;)n.push(u),A.test(t.charAt(q))?(u=t.charAt(q),q++):(u=o,ut(b));n!==o?e=r=[r,n]:(q=e,e=o)}else q=e,e=o;return e}function pt(){var e,r,n,u,c;for(e=q,r=[],A.test(t.charAt(q))?(n=t.charAt(q),q++):(n=o,ut(b));n!==o;)r.push(n),A.test(t.charAt(q))?(n=t.charAt(q),q++):(n=o,ut(b));if(r!==o)if("//"===t.substr(q,2)?(n="//",q+=2):(n=o,ut(x)),n!==o){for(u=[],y.test(t.charAt(q))?(c=t.charAt(q),q++):(c=o,ut(C));c!==o;)u.push(c),y.test(t.charAt(q))?(c=t.charAt(q),q++):(c=o,ut(C));u!==o?e=r=[r,n,u]:(q=e,e=o)}else q=e,e=o;else q=e,e=o;return e}function dt(){var t,e;return t=q,ht()!==o&&(e=bt())!==o?(D=t,t=e):(q=t,t=o),t}function vt(){var t,e;for(t=[],e=mt();e!==o;)t.push(e),e=mt();return t}function mt(){var e,r;return e=q,function(){var e,r,n,u;for(e=q,r=[],n=pt();n!==o;)r.push(n),n=pt();if(r!==o){if(n=[],A.test(t.charAt(q))?(u=t.charAt(q),q++):(u=o,ut(b)),u!==o)for(;u!==o;)n.push(u),A.test(t.charAt(q))?(u=t.charAt(q),q++):(u=o,ut(b));else n=o;n!==o?e=r=[r,n]:(q=e,e=o)}else q=e,e=o;return e}()!==o&&(r=lt())!==o?(D=e,e=r):(q=e,e=o),e}function gt(){var t,e,r;return t=q,(e=lt())!==o&&(D=t,r=e,e=function(t){let e=r(t);!("_nocheck"in t&&1==t._nocheck)&&(e<0||e>100)&&Q("Color must be between 0 and 100, got ${color}"),e*=2.55;let n=Math.round(e).toString(16);return n.length<2&&(n="0"+n),"#"+n.repeat(3)}),t=e}function At(){var t,e,r;return t=q,(e=lt())!==o&&(D=t,r=e,e=function(t){let e=r(t);return!("_nocheck"in t&&1==t._nocheck)&&(e<0||e>100)&&Q("Coordinate must be between 0 and 100, got "+e),e}),t=e}function bt(){var e,r,n,u;if(e=q,V.test(t.charAt(q))?(r=t.charAt(q),q++):(r=o,ut(W)),r!==o){for(n=[],X.test(t.charAt(q))?(u=t.charAt(q),q++):(u=o,ut(Y));u!==o;)n.push(u),X.test(t.charAt(q))?(u=t.charAt(q),q++):(u=o,ut(Y));n!==o?(D=e,e=r=r+n.join("")):(q=e,e=o)}else q=e,e=o;return e}let xt;if((r=c())!==o&&q===t.length)return r;throw r!==o&&q<t.length&&ut({type:"end"}),ct(K,J<t.length?t.charAt(J):null,J<t.length?ot(J,J+1):ot(J,J))}}},function(t,e,r){"use strict";r.r(e);var n=r(0);const o=document.getElementById("code");o.innerHTML="paper 50";const u=document.getElementById("output"),c=document.getElementById("canvas");let a={ctx:c.getContext("2d"),timer:null,mousex:0,mousey:0};function i(){a.timer&&(console.log("Stopped"),clearInterval(a.timer),a.timer=null),a.ctx.clearRect(0,0,100,100);try{u.innerHTML="";Object(n.parse)(o.value)(a)}catch(t){"SyntaxError"==t.name?u.innerHTML=`${t.location.end.line}:${t.location.end.column}: ${t.message}`:u.innerHTML=t}}o.addEventListener("keyup",i),window.addEventListener("hashchange",(function(){const t=location.hash.substr(1);0==t.length?(console.log("Clear"),o.value="",i()):t.startsWith("https:")?(console.log("Fetch:",t),fetch("https://cors-anywhere.herokuapp.com/"+t).then(t=>t.text()).then(t=>{console.log("Code:",t),o.value=t,i()})):(console.log("Code:",t),o.value=decodeURI(t),i())}),!1),c.addEventListener("mousemove",(function(t){const e=c.getBoundingClientRect(),r=100/(e.right-e.left),n=100/(e.bottom-e.top);a.mousex=Math.round((t.clientX-e.left)*r),a.mousey=Math.round((t.clientY-e.top)*n)}),!1),i()}]);